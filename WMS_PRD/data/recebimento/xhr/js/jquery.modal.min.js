/*
    Um simples jQuery modal (http://github.com/kylefox/jquery-modal)
    Versão 0.8.0
*/
(Função (jquery), janela, documento): o (jQuery, janela, documento)} (função (o , T, e, i) {var s = [], l = função () {retorno s.length? S [s.length-1]: null}, n = função () {var o, t =! 1 , Para (o = s.length-1; o> = 0; o -) s [o]. $ Blocker && (s [o]. $ Blocker.toggleClass ("current",! T) .toggleClass ("behind (T), t = 0), o.modal = função (t, e) {var i, n; se (isto. $ Body = o ("corpo"), this.options = o.extend {}, O.modal.defaults, e), this.options.doFade =! IsNaN (parseInt (this.options.fadeDuration, 10)), isto. $ Blocker = null, this.options.closeExisting) for (; o .modal.isActive ();) o.modal.close (); if (s.push (this), t.is ("a")) if (n = t.attr ("href"), /.test(n)){if(this.$elm=o(n),1!==this.$elm.length) return null; this. $ Body.append (this. $ Elm), this.(), Ou seja, $ this, $ elm = o ("<div>"), this $ body.append (this. $ Elm), i = function (o, t) {t.elm.remove ()}, This.showSpinner (), t.trigger (o.modal.AJAX_SEND), o.get (n) .done (função (e) {if.modal.isActive ()) {t.trigger (o.modal. AJAX_SUCCESS); var s = l (); s. $ Elm.empty () .append (e) .on (o.modal.CLOSE, i), s.hideSpinner (), s.open (), t.trigger (O.modal.AJAX_COMPLETE)}). Fail (função () {t.trigger (o.modal.AJAX_FAIL); var e = l (); e.hideSpinner (), s.pop (), t.trigger (O.modal.AJAX_COMPLETE)}), else this. $ Elm = t, this. $ Body.append (this. $ Elm), this.open ()}, o.modal.prototype = {constructor: o.modal , Open: function () {var t = this; this.block (), this.options.doFade? SetTimeout (function () {t.show ()}, this.options.fadeDuration * this.options.fadeDelay): This (), o (e) .off ("keydown.modal"). On ("keydown.modal", função (o) {var t = l (); 27 == o.which && t.options.escapeClose &&T.close ()}), this.options.clickClose && this. $ Blocker.click (função (t) {t.target == this && o.modal.close ()})}, close: function () {s.pop ), This.unblock (), this.hide (), o.modal.isActive () || o (e) .off ("keydown.modal")}, bloco: function () {this. $ Elm.trigger (O.modal.BEFORE_BLOCK, [this._ctx ()]), isto $ $ body.css ("overflow", "hidden"), isto. $ Blocker = o ('<div class = (), () () () () () () () () () () () () () () () () () () () () () () {Opacity: .fadeDuration), isto. $ Elm.trigger (o.modal.BLOCK, [this._ctx ()])}, desbloquear: function (t) {! T && this.options.doFade? This. $ Blocker.fadeOut (this. Options.fadeDuration, this.unblock.bind (this,! 0)) :( this $ blocker.children (). AppendTo (this. $ Body), isto. $ Blocker.remove (), this.$ Blocker = null, n (), o.modal.isActive () || this. $ Body.css ("overflow", ""))}, mostre: function () {this. $ Elm.trigger (o. Modal.BEFORE_OPEN, [this._ctx ()]), this.options.showClose && (this.closeButton = o ('<a href = "# fechar-modal" rel = "modal: close" class = + This.options.closeClass + '">' + this.options.closeText +" </a> "), this. $ Elm.append (this.closeButton)), this. $ Elm.addClass (this.options.modalClass) .appendTo (this $ blocker), this.options.doFade? This. $ Elm.css ("opacity", 0) .show (). Animate ({opacity: 1}, this.options.fadeDuration): this. $ Elm.show (), this. $ Elm.trigger (o.modal.OPEN, [this._ctx ()])}, ocultar: function () {this. $ Elm.trigger (o.modal.BEFORE_CLOSE, This._ctx ()]), this.closeButton && this.closeButton.remove (); var t = this; this.options.doFade? This. $ Elm.fadeOut (this.Options.fadeDuration, function () {t. $ Elm.trigger (o.modal.AFTER_CLOSE, [t._ctx ()])): this. $ Elm.hide (0, function () {t. $ Elm. (O.modal.AFTER_CLOSE, [t._ctx ()])}, isto. $ Elm.trigger (o.modal.CLOSE, [this._ctx ()])}, showSpinner: function () {this. Options.showSpinner && (this.spinner = this.spinner || o ('<div class =' ​​'+ this.options.modalClass +' - spinner "> </ div> '). Append (this.options.spinnerHtml), this $ Body.append (this.spinner), this.spinner.show ())}, hideSpinner: function () {this.spinner && this.spinner.remove ()}, _ ctx: function () {return {elm: this. $ Elm, $ blocker: this. $ Blocker, options: this.options}}, o.modal.close = função (t) {if (o.modal.isActive ()) {t && t.preventDefault (); var e = L (); return e.close (), e. $ Elm}}, o.modal.isActive = function () {return s.length> 0}, o.modal.getCurrent = l, o.modal.defaults = {CloseExisting:! 0,FecharClose:! 0, fecharTexto: "Fechar", fecharClass: "", modalClass: "modal", spinnerHtml: null, showSpinner:! 0, showClose:! 0, fadeDuration: null, fadeDelay: O.modal.BEFORE_BLOCK = "modal: before-block", o.modal.BLOCK = "modal: block", o.modal.BEFORE_OPEN = "modal: before-open", o.modal.OPEN = "modal: open ", O.modal.BEFORE_CLOSE =" modal: before-close ", o.modal.CLOSE =" modal: close ", o.modal.AFTER_CLOSE =" modal: after-close ", o.modal.AJAX_SEND =" modal : Ajax: send ", o.modal.AJAX_SUCCESS =" modal: ajax: sucesso ", o.modal.AJAX_FAIL =" modal: ajax: fail ", o.modal.AJAX_COMPLETE =" modal: ajax: complete ", o. Fn.modal = function (t) {return 1 === this.length && new o.modal (this, t), this}, o (e) .on ("click.modal", 'a [rel ~ = "modal : Fechar "] ', o.(T) {t.preventDefault (), o (this) .modal () () () () )})});